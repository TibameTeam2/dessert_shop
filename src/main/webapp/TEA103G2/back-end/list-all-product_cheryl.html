<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>嗜甜 | 顛覆你想像的甜點</title>

  <!-- Favicon -->
  <link rel="shortcut icon" href="assets/images/favicon.ico"/>
  <link rel="stylesheet" href="assets/css/backend-plugin.min.css">
  <link rel="stylesheet" href="assets/css/backend.css?v=1.0.0">
  <link rel="stylesheet" href="assets/vendor/@fortawesome/fontawesome-free/css/all.min.css">
  <link rel="stylesheet" href="assets/vendor/line-awesome/dist/line-awesome/css/line-awesome.min.css">
  <link rel="stylesheet" href="assets/vendor/remixicon/fonts/remixicon.css">
  
  
  <style>
   thead.bg-white{
   	text-align:center;
   }
   tbody.ligth-body{
   	white-space: nowrap;
   	text-align:center;
   }
  
  </style>
  
  
  
</head>
<body class="  ">
<!-- loader Start -->
<div id="loading">
  <div id="loading-center">
  </div>
</div>
<!-- loader END -->
<!-- Wrapper Start -->
<div class="wrapper">


<!--Header-->
  <div class="header"></div>
	
  <div class="content-page">
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-12">
          <div class="d-flex flex-wrap flex-wrap align-items-center justify-content-between mb-4">
            <div>
              <h4 class="mb-3">商品列表</h4>
              <p class="mb-0">The product list effectively dictates product presentation and provides space<br> to list
                your products and offering in the most appealing way.</p>
            </div>
            <a href="add-product.html" class="btn btn-primary add-list"><i class="las la-plus mr-3"></i>新增商品</a>
          </div>
        </div>
        <!-- Table的地方 --><!--  一個tr為一列 -->
        <div class="col-lg-12">
          <div class="table-responsive rounded mb-3">
            <table class="data-table table mb-0 tbl-server-info">
              <thead class="bg-white text-uppercase">
              <tr class="ligth ligth-data">
                <th>商品照片</th>
                <th>商品名稱</th>
                <th>編號</th>
                <th>主分類</th>
                <th>子分類</th>
                <th>售價</th>
                <th>現貨數量</th>
                <th>狀態</th>
                <th>累計銷售</th>
                <th>累計星等</th>
                <th>累計評論</th>
                <th>甜度</th>
                <th>熱量</th>
                <th>賞味天數</th>
                <th>動作</th>
              </tr>
              </thead>
              <tbody class="ligth-body">
              <!-- 商品插入的位置 -->
<!--                                       <tr> -->
<!--                                           <td> -->
<!--                                               <div class="checkbox d-inline-block"> -->
<!--                                                   <input type="checkbox" class="checkbox-input" id="checkbox2"> -->
<!--                                                   <label for="checkbox2" class="mb-0"></label> -->
<!--                                               </div> -->
<!--                                           </td> -->
<!--                                           <td> -->
<!--                                               <div class="d-flex align-items-center"> -->
<!--                                                   <img src="assets/images/table/product/01.jpg" class="img-fluid rounded avatar-50 mr-3" alt="image"> -->
<!--                                                   <div> -->
<!--                                                       Organic Cream2蛋糕 -->
<!--                                                       <p class="mb-0"><small>This is test Product</small></p> -->
<!--                                                   </div> -->
<!--                                               </div> -->
<!--                                           </td> -->
<!--                                           <td>CREM09</td> -->
<!--                                           <td>Beauty</td> -->
<!--                                           <td>$25.00</td> -->
<!--                                           <td>Lakme</td> -->
<!--                                           <td>$10.00</td> -->
<!--                                           <td>10.0</td> -->
<!--                                           <td> -->
<!--                                               <div class="d-flex align-items-center list-action"> -->
<!--                                                   <a class="badge badge-info mr-2" data-toggle="tooltip" data-placement="top" title="" data-original-title="View" -->
<!--                                                       href="#"><i class="ri-eye-line mr-0"></i></a> -->
<!--                                                   <a class="badge bg-success mr-2" data-toggle="tooltip" data-placement="top" title="" data-original-title="Edit" -->
<!--                                                       href="#"><i class="ri-pencil-line mr-0"></i></a> -->
<!--                                                   <a class="badge bg-warning mr-2" data-toggle="tooltip" data-placement="top" title="" data-original-title="Delete" -->
<!--                                                       href="#"><i class="ri-delete-bin-line mr-0"></i></a> -->
<!--                                               </div> -->
<!--                                           </td> -->
<!--                                       </tr> -->
              <!-- 原始假資料結束 -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <!-- Page end  -->
    </div>
    <!-- Modal Edit -->
    <div class="modal fade" id="edit-note" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-body">
            <div class="popup text-left">
              <div class="media align-items-top justify-content-between">
                <h3 class="mb-3">Product</h3>
                <div class="btn-cancel p-0" data-dismiss="modal"><i class="las la-times"></i></div>
              </div>
              <div class="content edit-notes">
                <div class="card card-transparent card-block card-stretch event-note mb-0">
                  <div class="card-body px-0 bukmark">
                    <div class="d-flex align-items-center justify-content-between pb-2 mb-3 border-bottom">
                      <div class="quill-tool">
                      </div>
                    </div>
                    <div id="quill-toolbar1">
                      <p>Virtual Digital Marketing Course every week on Monday, Wednesday and Saturday.Virtual Digital
                        Marketing Course every week on Monday</p>
                    </div>
                  </div>
                  <div class="card-footer border-0">
                    <div class="d-flex flex-wrap align-items-ceter justify-content-end">
                      <div class="btn btn-primary mr-3" data-dismiss="modal">Cancel</div>
                      <div class="btn btn-outline-primary" data-dismiss="modal">Save</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Wrapper End-->

<!-- Backend Bundle JavaScript -->
<script src="assets/js/backend-bundle.min.js"></script>

<!-- Table Treeview JavaScript -->
<script src="assets/js/table-treeview.js"></script>

<!-- Chart Custom JavaScript -->
<script src="assets/js/customizer.js"></script>

<!-- Chart Custom JavaScript -->
<script async src="assets/js/chart-custom.js"></script>

<!-- app JavaScript -->
<script src="assets/js/app.js"></script>


<script>
    $(document).ready(function () {
        $('.header').load('header.html')
        // $('.footer').load('footer.html')
    })
</script>


<!-- 商品展示 -->
<script>

getAllProduct();

function getAllProduct(){
	
$("tbody").on("click", "a.bg-success", function(){
	console.log("edit");
	
});

    $.get("/dessert_shop/product/backend_getAllProduct", {}, function (data) {
		var action = `<div class="d-flex align-items-center list-action">
<!--因為有商品成分跟介紹的部分 所以應該要做預覽-->		
            			<a class="badge badge-info mr-2" data-toggle="tooltip" data-placement="top" title="" data-original-title="View"
                 			href="#"><i class="ri-eye-line mr-0"></i></a>
                 			
            			<a class="badge bg-success mr-2" data-toggle="tooltip" data-placement="top" title="" data-original-title="Edit"
                			href="javascript:void(0)"><i class="ri-pencil-line mr-0"></i></a>
            			<a class="badge bg-warning mr-2" data-toggle="tooltip" data-placement="top" title="" data-original-title="Delete"
                			href="javascript:void(0)"><i class="ri-delete-bin-line mr-0"></i></a>
        			  </div>`
        console.log("data msg:"+data.msg);
        			  
		if(data.flag){
			let table=$(".data-table").DataTable();
			table.destroy();
			table = $(".data-table").DataTable({
                "lengthMenu": [5, 10, 20],     //顯示幾項結果
                "language": {
                    "processing": "處理中...",
                    "loadingRecords": "載入中...",
                    "lengthMenu": "顯示 _MENU_ 項結果",
                    "zeroRecords": "沒有符合的結果",
                    "info": "顯示第 _START_ 至 _END_ 項結果，共 _TOTAL_ 項",
                    "infoEmpty": "顯示第 0 至 0 項結果，共 0 項",
                    "infoFiltered": "(從 _MAX_ 項結果中過濾)",
                    "infoPostFix": "",
                    "search": "搜尋:",
                    "paginate": {
                        "first": "第一頁",
                        "previous": "上一頁",
                        "next": "下一頁",
                        "last": "最後一頁"
                    },
                    "aria": {
                        "sortAscending": ": 升冪排列",
                        "sortDescending": ": 降冪排列"
                    }
                },
                "columnDefs": [
                    {
                        "targets": [0],    //欄位從0開始算
                        "visible": true,   //欄位是否顯示 預設是true
                        "orderable": false,  //是否可以排序
                        "width": "1%"
                    },
                    {
                        "targets": [1],    //欄位從0開始算
                        "visible": true,   //欄位是否顯示 預設是true
                        "orderable": true,  //是否可以排序
                        "width": "1%"
                    },
                    {
                        "targets": [2],    //欄位從0開始算
                        "visible": true,   //欄位是否顯示 預設是true
                        "orderable": true,  //是否可以排序
                        "width": "1%"
                    },
                    {
                        "targets": [3],    //欄位從0開始算
                        "visible": true,   //欄位是否顯示 預設是true
                        "orderable": true,  //是否可以排序
                        "width": "60px"
                    }

                ]
            })
			table.clear().draw();
			let url = location.href.split("/TEA103G2")[0];
			for (var i = 0; i < data.data.length; i++) {
	            let totoal_purchase = data.data[i].totoal_purchase;
	            // 撈第一張照片
	            let product_img1 = url + data.data[i].image_url[0];
	            table.row.add([
	            	'<img class="table-img avatar-50" src="'+product_img1+'">',
	            	data.data[i].product_name,
	            	data.data[i].product_id,
	            	data.data[i].product_type,
	            	data.data[i].product_subtype,
	           		data.data[i].product_price,
	            	data.data[i].product_available_qty,
	            	data.data[i].product_status == 0 ? "未上架" : "上架中",
	            	data.data[i].total_purchase,
	            	data.data[i].average_star,
	            	data.data[i].total_review,
	            	data.data[i].degree_of_sweetness,
	            	data.data[i].product_calorie,
	            	data.data[i].expiry_after_buying,
	            	action
	            ]).draw(false);
			}
		}else{
		}
		
		
    });//$.get

    
}    
    
</script>
    
    
  </body>
</html>